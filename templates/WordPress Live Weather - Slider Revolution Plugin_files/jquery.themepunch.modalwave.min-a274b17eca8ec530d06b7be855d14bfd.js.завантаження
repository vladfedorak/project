(function(jQuery,undefined){jQuery.fn.extend({modalwave:function(options){jQuery.fn.modalwave.defaults={overlaybg:"rgba(0,0,0,0.8);"};options=jQuery.extend({},jQuery.fn.modalwave.defaults,options);return this.each(function(){var opt=options;var container=jQuery(this);if(opt.get!="true"&&opt.get!=true){opt.get=true;if(window.tplogs==true)
try{console.groupCollapsed("MODAL WAVE 1.0 Initialisation on "+container.attr('id'));console.groupCollapsed("Used Options:");console.info(options);console.groupEnd();console.groupCollapsed("Tween Engine:")}catch(e){}
if(punchgs.TweenLite==undefined){if(window.tplogs==true)
try{console.error("GreenSock Engine Does not Exist!");}catch(e){}
return false;}
punchgs.force3D=true;if(window.tplogs==true)
try{console.info("GreenSock Engine Version in Essential Grid:"+punchgs.TweenLite.version);}catch(e){}
punchgs.TweenLite.lagSmoothing(2000,16);punchgs.force3D="auto";if(window.tplogs==true)
try{console.groupEnd();console.groupEnd();}catch(e){}
initWaveElement(container,opt);}})},method_a:function(options){var container=jQuery(this);return false;},method_b:function(options){var container=jQuery(this);var opt=getOptions(container);return opt;}})
function putModalCenter(){if(jQuery('.md-visiblemodal').length>0){var pos={left:jQuery(window).width()/2-jQuery('.md-visiblemodal').outerWidth()/2,top:jQuery(window).height()/2-jQuery('.md-visiblemodal').outerHeight()/2},trans=jQuery('.md-visiblemodal').data("transition");if(trans=="stickyup")pos.top=0;punchgs.TweenLite.to(jQuery('.md-visiblemodal'),0.3,{top:pos.top,left:pos.left});}}
function initWaveElement(container,opt){container.appendTo("body");var controll=container.data('caller'),timer=container.data('timer'),buttonid=container.data('button');timer=timer==undefined?5:parseInt(timer,0);timer=timer*1000;if(!jQuery('#md-modaloverlay').length){jQuery('body').append('<div id="md-modaloverlay"></div>');}
switch(controll){case "button":var btn=jQuery('#'+buttonid);btn.click(function(){var btn=jQuery(this),modal=jQuery('#'+btn.data('modal'));showModal(modal,opt);modal.addClass("md-visiblemodal");})
break;case "start":var btn=jQuery('#'+buttonid),modal=jQuery('#'+btn.data('modal'));showModal(modal,opt);modal.addClass("md-visiblemodal");break;case "timer":setTimeout(function(){var btn=jQuery('#'+buttonid),modal=jQuery('#'+btn.data('modal'));showModal(modal,opt);modal.addClass("md-visiblemodal");},timer);break;case "scroll":jQuery(window).on("scroll."+buttonid,function(){var btn=jQuery('#'+buttonid),win=jQuery(window);wh=win.height(),wt=win.scrollTop();if(btn.offset().top>wt&&btn.offset().top<wt+wh){var modal=jQuery('#'+btn.data('modal'));showModal(modal,opt);modal.addClass("md-visiblemodal");jQuery(window).unbind('scroll.'+buttonid);}});break;}
container.find('.md-close.button').click(function(){hideModal(container);});jQuery('#md-modaloverlay').click(function(){hideModal(jQuery('.md-visiblemodal'));})
jQuery(window).on("resize",function(){putModalCenter();});if(jQuery('body').data('modalinterval')==undefined){jQuery('body').data('modalinterval',setInterval(function(){putModalCenter();},800))}}
showmodal_array=new Array();function showModal(modal,opt){if(showmodal_array.indexOf(modal.attr("id"))<0&&modal.find('.page_content')){showmodal_array.push(modal.attr("id"));modal.find('.page_content').html(modal.find('.page_content').data('content'));}
modal.find('.modalvideo').each(function(){var t=jQuery(this);t.html('<iframe width="'+t.data("width")+'" height="'+t.data("height")+'" src="https://www.youtube.com/embed/'+t.data("src")+'?feature=oembed" frameborder="0" allowfullscreen=""></iframe>')
jQuery('.modalvideo').fitVids();});var trans=modal.data("transition"),anim=new punchgs.TimelineLite,ol=jQuery('#md-modaloverlay'),time=0.3,delay=0.02,from={autoAlpha:0,scale:1,x:0,y:0,z:0,rotation:0,rotationX:0,rotationY:0,force3D:"true",transformPerspective:600},to={autoAlpha:1,scale:1,x:0,y:0,z:0,rotation:0,rotationX:0,rotationY:0,force3D:"true",transformPerspective:600,ease:punchgs.Power3.easeInOut},coveranimto={autoAlpha:1,ease:punchgs.Power3.easeInOut},pos={left:jQuery(window).width()/2-modal.outerWidth()/2,top:jQuery(window).height()/2-modal.outerHeight()/2};from=jQuery.extend({},from,{left:pos.left,top:pos.top});to=jQuery.extend({},to,{left:pos.left,top:pos.top});punchgs.TweenLite.set(modal,{display:"block"});anim.pause();anim.add(punchgs.TweenLite.set(modal,{x:"0",y:"0"}));if(modal.data('overlay')!=undefined)
jQuery('#md-modaloverlay').css({background:modal.data('overlay')});else
jQuery('#md-modaloverlay').css({background:opt.overlaybg});switch(trans){case "fadein":from=jQuery.extend({},from,{scale:0.7});to=jQuery.extend({},to,{ease:punchgs.Power1.easeInOut});break;case "slideinright":from=jQuery.extend({},from,{x:50});to=jQuery.extend({},to,{x:0});break;case "slideinbottom":from=jQuery.extend({},from,{y:50});to=jQuery.extend({},to,{y:0});break;case "newspaper":from=jQuery.extend({},from,{rotation:720,scale:0});to=jQuery.extend({},to,{ease:punchgs.Power1.easeInOut});break;case "fall":from=jQuery.extend({},from,{transformPerspective:1300,z:600,rotationX:20});to=jQuery.extend({},to,{ease:punchgs.Power1.easeInOut});break;case "sidefall":from=jQuery.extend({},from,{transformPerspective:1300,z:400,x:50,rotation:10,rotationY:-10,rotationX:0});to=jQuery.extend({},to,{ease:punchgs.Power1.easeInOut});break;case "stickyup":time=0.2;from=jQuery.extend({},from,{yPercent:"-100%",y:0,top:0});to=jQuery.extend({},to,{autoAlpha:1,yPercent:"0%",y:0,top:0,ease:punchgs.Power1.easeInOut});break;case "3dfliphorizontal":time=0.4;from=jQuery.extend({},from,{transformPerspective:1300,rotationY:-90});to=jQuery.extend({},to,{ease:punchgs.Power2.easeInOut});break;case "3dflipvertical":time=0.4;from=jQuery.extend({},from,{transformPerspective:1300,rotationX:-90});to=jQuery.extend({},to,{ease:punchgs.Power2.easeInOut});break;case "3dsign":time=1;from=jQuery.extend({},from,{transformPerspective:1300,rotationX:-90,transformOrigin:"50% 0%"});to=jQuery.extend({},to,{ease:punchgs.Elastic.easeInOut});break;case "superscaled":from=jQuery.extend({},from,{scale:2.0});to=jQuery.extend({},to,{ease:punchgs.Power1.easeInOut});break;case "justme":from=jQuery.extend({},from,{scale:0.7});to=jQuery.extend({},to,{ease:punchgs.Power1.easeInOut});coveranimto.autoAlpha=1;break;case "3dslit":anim.add(punchgs.TweenLite.fromTo(modal,0.2,{autoAlpha:0,transformPerspective:1300,force3D:"true",left:pos.left,top:pos.top,rotationY:88,scale:0.5},{rotationY:88,scale:1,autoAlpha:1}),0.02);anim.append(punchgs.TweenLite.to(modal,0.2,{scale:1,rotationY:0,autoAlpha:1}));break;case "3drotatebottom":time=0.4;from=jQuery.extend({},from,{transformPerspective:1300,rotationX:90,transformOrigin:"50% 100%",y:300});to=jQuery.extend({},to,{ease:punchgs.Power2.easeInOut});break;case "3drotateleft":time=0.4;from=jQuery.extend({},from,{transformPerspective:1300,rotationY:90,transformOrigin:"0% 50%",x:-300});to=jQuery.extend({},to,{ease:punchgs.Power2.easeInOut});break;case "letmein":time=0.4;from=jQuery.extend({},from,{y:2000});to=jQuery.extend({},to,{ease:punchgs.Power2.easeInOut});anim.append(punchgs.TweenLite.fromTo(jQuery('#bodywrapper'),0.2,{transformPerspective:1300,transformOrigin:"50% 0%"},{rotationX:-5}));anim.append(punchgs.TweenLite.fromTo(jQuery('#bodywrapper'),0.2,{transformPerspective:1300,transformOrigin:"50% 0%"},{rotationX:0,delay:0.4}));delay=0.2;break;case "makeway":time=0.4;from=jQuery.extend({},from,{x:2000});to=jQuery.extend({},to,{ease:punchgs.Power2.easeInOut});anim.append(punchgs.TweenLite.fromTo(jQuery('#bodywrapper'),0.2,{clearProps:"auto",transformPerspective:1300,transformOrigin:"50% 50%"},{scale:0.8,rotationY:30}));anim.append(punchgs.TweenLite.to(jQuery('#bodywrapper'),0.2,{scale:0.6,rotationY:0}));delay=0.1;break;case "slipfromtop":time=0.4;from=jQuery.extend({},from,{y:-2000});to=jQuery.extend({},to,{ease:punchgs.Power2.easeInOut});anim.append(punchgs.TweenLite.fromTo(jQuery('#bodywrapper'),0.3,{transformPerspective:1300,transformOrigin:"50% 100%"},{rotationX:5,ease:punchgs.Power3.easeIn}));anim.append(punchgs.TweenLite.fromTo(jQuery('#bodywrapper'),0.2,{transformPerspective:1300,transformOrigin:"50% 100%"},{rotationX:0,ease:punchgs.Power3.easeOut,delay:0.2}));delay=0.1;break;default:break;}
if(trans!="3dslit")
anim.add(punchgs.TweenLite.fromTo(modal,time,from,to),delay);anim.add(punchgs.TweenLite.fromTo(ol,0.3,{autoAlpha:0},coveranimto),0);anim.play();modal.data('anim',anim);}
function hideModal(modal){var trans=modal.data("transition");if(modal.data('anim')==undefined)return false;modal.data('anim').reverse();modal.removeClass("md-visiblemodal");if(trans=="makeway"||trans=="letmein"||trans=="slipfromtop")
setTimeout(function(){punchgs.TweenLite.set(jQuery('#bodywrapper'),{clearProps:"all"});punchgs.TweenLite.set(jQuery('#footer'),{clearProps:"position"});},800)
punchgs.TweenLite.delayedCall(0.2,hideModalEnd,[modal]);}
function hideModalEnd(modal){modal.find('.modalvideo').each(function(){jQuery(this).html("");});punchgs.TweenLite.to(jQuery('#md-modaloverlay'),0.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})
punchgs.TweenLite.set(modal,{display:"none"});}})(jQuery);